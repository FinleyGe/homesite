kind: pipeline
type: docker
name: homesite

steps:
  - name: base-build
    image: node:20-slim
    commands:
      - npm config set registry http://mirrors.cloud.tencent.com/npm/
      - corepack enable
      - corepack use pnpm
      - pnpm i
    # volumes:
    #   - name: base
    #     path: homesite
  - name: deploy
    image: node:20-slim
    environments:
      - PORT=3000
    commands:
      - node ./projects/app/.output/server/index.mjs
