## FastGPT

[FastGPT](https://fastgpt.in) 提供了一种基于 LLM Model 搭建应用的简便方式。
本文通过搭建一个英语作文纠错机器人，介绍一下如何使用**工作流**。

## 搭建过程

### 1. 创建工作流
![创建工作流](https://www.f1nley.xyz/api/img/xn6Tff30.png)
可以从多轮翻译机器人开始创建。

### 2. 获取输入，拼接一个代码块，然后使用大模型进行分析

![大模型](https://www.f1nley.xyz/api/img/WmqTjMLz.png)

提示词是最重要的一个参数，这里提供的提示词仅供参考：

~~~markdown
## 角色
资深英语写作专家

## 任务
对输入的原文进行分析。 找出其中的各种错误， 包括但不限于单词拼写错误、 语法错误等。 
注意： 忽略标点符号前后空格的问题。
注意： 对于存在错误的句子， 提出修改建议是指指出这个句子中的具体部分， 然后提出将这一个部分修改替换为什么。

## 输出格式
不要使用 Markdown 语法， 输入 JSON 格式的内容。
输出的"reason"的内容使用中文。
直接输出一个列表， 其成员为一个相同类型的对象， 定义如下
您正在找回 FastGPT 账号
```
{
“raw”: string; // 表示原文
“reason”: string; // 表示原因
“suggestion”: string; // 修改建议
}
```
~~~

### 3. 数据处理

上面的大模型输出了一个 json，这里要进行数据处理。数据处理可以使用代码执行组件

![](https://www.f1nley.xyz/api/img/gVCyCwG7.png)


```js
function main({data}){
    const array = JSON.parse(data)
    return {
        content: array.map(
            (item, index) => {
                return `
## 分析${index+1}
- **错误**: ${item.raw}
- **分析**: ${item.reason}
- **修改建议**: ${item.suggestion}
`
            }
        ).join('')
    }
}
```

## 测试

> [点我使用](https://share.fastgpt.in/chat/share?shareId=b4r173wkcjae7wpnexcvmyc3) 或者尝试下面的 iframe

<iframe
  src="https://share.fastgpt.in/chat/share?shareId=b4r173wkcjae7wpnexcvmyc3"
  style="width: 100%; height: 100%; min-height: 500px"
  frameborder="0" 
  allow="*"
/>
